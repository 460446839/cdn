# 设置缓存过期时间 {#task_261642 .task}

通过本文档，您可以针对不同目录路径或文件名后缀的资源，自定义指定资源内容的缓存过期时间规则和缓存策略优先级，设置它们的缓存过期时间。

配置缓存资源的过期时间前，建议您源站的内容不使用同名更新，以版本号的方式同步，即采用img-v1.0.jpg、img-v2.1.jpg的命名方式。

关于CDN节点上缓存资源的缓存策略流程图如下：

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/5147/15591809103383_zh-CN.png)

**说明：** 

-   Cache的默认缓存策略用于配置文件过期时间，在此配置的优先级高于源站配置。如果源站未配置cache配置，则支持按目录、文件后缀两种方式设置（支持设置完整路径缓存策略）。
-   CDN节点上缓存的资源，可能由于热度较低而被提前从节点删除。

1.  登录[CDN控制台](https://cdnnext.console.aliyun.com)。
2.  单击**域名管理**。
3.  在域名管理页面，单击目标域名后的**管理**。
4.  单击**缓存配置**。
5.  在**缓存过期时间**页签，单击**添加**。
6.  配置缓存规则，您可以选择按目录或文件后缀名进行配置。![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/5147/15591809107277_zh-CN.png)

 

    |配置项|说明|
    |---|--|
    |类型|     -   目录：指定路径下的缓存资源。
    -   文件后缀名：指定文件类型的缓存资源。
 |
    |地址|     -   添加单条目录（支持完整路径）时，须以“/”开头，如/directory/aaa。
    -   添加多个文件后缀名时，须以半角逗号分隔，如jpg,txt。
 |
    |过期时间|资源对应的缓存时间。过期时间最多设置为3年，建议您参照以下规则进行配置：     -   对于不经常更新的静态文件（如图片类型、应用下载类型等），建议您将缓存时间设置为1个月以上。
    -   对于频繁更新的静态文件（如js、css等），您可以根据实际业务情况设置。
    -   对于动态文件（如php、jsp、asp等），建议您将缓存时间设置为0s，即不缓存。
 |
    |权重|缓存规则的优先级。 **说明：** 

    -   取值范围：1 ~ 99间的整数。数字越大，优先级越高，优先生效。
    -   不推荐设置相同的权重，权重相同的两条缓存策略优先级随机。
 示例：为加速域名`example.aliyun.com`配置三条缓存策略。

    -   缓存策略1：文件名后缀为jpg、png的所有资源过期时间设置为1月，权重设置为90。
    -   缓存策略2：目录为/www/dir/aaa过期时间设置为1小时，权重设置为70。
    -   缓存策略3：完整路径为/www/dir/aaa/example.php过期时间设置为0s，权重设置为80。
 那么，缓存策略1优先生效。

 |

7.  单击**确认**，配置成功。您也可以单击**修改**或**删除**，对当前配置的缓存策略进行相应操作。

